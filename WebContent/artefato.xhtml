<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">


<ui:composition template="/templates/templates.xhtml"> 


<ui:define name="titulo">Cadastrar Artefatos</ui:define>


<ui:define name="conteudo">

<h:form id="formArtefato">		
	<h:panelGrid columns="2">
     	
     	<p:outputLabel value="Título:" for="titulo"/>
     	<p:inputTextarea id="titulo" value="#{artefatoBean.artefato.titulo}"  rows="1" cols="60" autoResize="false" required="true" requiredMessage="Título Obrigatório!" />
     	
     	<p:outputLabel value="Descricão:" for="descricao"/>
     	<p:inputTextarea id="descricao" value="#{artefatoBean.artefato.descricao}"  rows="6" cols="60" autoResize="false" />
     	
     	<p:outputLabel value="Situacão: " for="sit" />
					<p:selectOneMenu id="sit" value="#{artefatoBean.idSituacaoAtual}">
						<f:selectItems value="#{artefatoBean.situacoes}" var="sit" 
						 itemLabel="#{sit.descricao}" itemValue="#{sit.ordinal()}"  />
					</p:selectOneMenu>
					
		<p:outputLabel value="Produtor: " for="prod" />
	<p:selectOneMenu id="prod" value="#{artefatoBean.idParticipanteAtual}" required="true"  requiredMessage="Produtor Obrigatório!">
		<f:selectItem  itemLabel="Selecione..." />
		<f:selectItems value="#{artefatoBean.participantes}" var="part" 
			 itemLabel="#{part.nome}" itemValue="#{part.id}" />
	</p:selectOneMenu>			
     	
     	</h:panelGrid>
     	
     	<!-- 
     	<p:fieldset legend="Produtor(es)" id="fieldProdutor" >
     	
     	
     	    	
     	<p:commandButton value="Adicionar Produtor" icon="ui-icon-plus" oncomplete="PF('AddProdutor').show();"/>
     		   
     	
     	<p:dataTable style="max-width: 600px; min-width: 600px" value="#{#}" var="med"
	paginator="true" id="tableProdutor"  emptyMessage="Nenhum Produtor Cadastrado!" rows="5" >
		<p:column>
			<f:facet name="header">Nome</f:facet>
			<h:outputText value="#{#}" />
		</p:column>
		<p:column style="width:55px">
			<f:facet name="header">Excluir</f:facet>
			<p:commandButton icon="ui-icon-trash" action="#{#}" 
			update=":mensagem, tableProdutor" process="tableProdutor" />   
		</p:column>	
			
	</p:dataTable>		
		</p:fieldset>
		
		
		-->  
		 <p:commandButton action="#{artefatoBean.salvarArtefato()}" value="Salvar" 
				update=":mensagem :formArtefato"  process="@form" />		
	
</h:form>	
	
		
		
	<h:form id="formAddProdutor">
 	<p:dialog  header="Adicionar Produtor" widgetVar="AddProdutor" resizable="false" 
 		draggable="false" modal="true" showEffect="side" hideEffect="side"  >

		      	
     	<h:panelGrid columns="2">
		<p:outputLabel value="Produtor " for="prod" />
	<p:selectOneMenu id="prod" value="#{artefatoBean.idParticipanteAtual}">
		<f:selectItem itemValue="0" itemLabel="Selecione..." />
		<f:selectItems value="#{artefatoBean.participantes}" var="part" 
			 itemLabel="#{part.nome}" itemValue="#{part.id}"  />
	</p:selectOneMenu>
     	<p:commandButton value="Adicionar" icon="ui-icon-disk" action="#{artefatoBean.adicionarProdutor()}"
     	update=":mensagem " process="formAddProdutor" oncomplete="PF('AddProdutor').hide();"/> 
     	
		<p:commandButton value="Fechar" icon="ui-icon-close" oncomplete="PF('AddProdutor').hide();"/>

		</h:panelGrid>	
		
</p:dialog>
 </h:form> 	






  
</ui:define>	 
</ui:composition>













</html>
